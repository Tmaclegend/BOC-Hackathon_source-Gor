<!DOCTYPE html>
<html>
<head>
	<title>Queue Result</title>
	<script src="js/qrcode.min.js"></script>
</head>
<body onload="findGetParameter();" >
	<h1>Your Ticket:</h1>
	<p id ="result"></p>
	<div>
		<label>Ticket number: </label>
		<text id="QPos"></text>
	</div>

	<div>
		<label>Your Service: </label>
	<text id="service"></text>
	</div>
	
	<div>
		<label>Branch: </label>
	<text id="branch"></text>
	</div>

	<div id="qrcode"></div>
<script type="text/javascript">
new QRCode(document.getElementById("qrcode"), window.location.href);
</script>

	<script>
		// function findGetParameter(parameterName) {
		// 	console.log("in");
		// 	var result = null,
		// 	tmp = [];
		// 	location.search.substr(1).split("&").forEach(function (item) {
		// 		tmp = item.split("=");
		// 		if (tmp[0] === parameterName) result = decodeURIComponent(tmp[1]);
		// 	});
		// 	return result;
		// 	console.log(result);
		// }
		function findGetParameter(){
			var queryStr = window.location.search;
			queryStr = decodeURIComponent(queryStr);
			queryStr = queryStr.split("=");
			queryStr = queryStr[1];
			queryStr = queryStr.replace("[","");
			queryStr = queryStr.replace("]","");
			queryStr = JSON.parse(queryStr);

			console.log(queryStr);
			console.log(queryStr.Qpos);
			document.getElementById("QPos").innerHTML = queryStr.Qpos;
			document.getElementById("service").innerHTML = queryStr.service;
			document.getElementById("branch").innerHTML = queryStr.branch;
		}


	</script>
</body>

</html>