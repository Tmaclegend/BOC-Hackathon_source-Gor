<!DOCTYPE html>
<html>
<head>
	<title>Check</title>
</head>
<body>
<h1>Check Queue</h1>


   	<h1>Check JSON to Node</h1>
     


   <form onsubmit="getJSON(this)" class="checkqueue">
		<!-- <label for="Qpos">Qpos: </label>
		<input type="number" name="Qpos" class="Qform"><br> -->
		<label for="customerId">customerId: </label>
		<input type="text" name="customerId" class="CQform"><br>

		
		<input type="submit" name="Submit">
	</form>


   <p id ="result">
        </p>
	<script>


function getJSON(form){
var objects = []; 
			if (typeof form == 'object' && form.nodeName.toLowerCase() == "form") {  
				var fields = form.getElementsByClassName("CQform");  
				console.log('in if');
				// for(var i=0;i<fields.length;i++){  
					objects[objects.length] = { name: fields[0].getAttribute("name"), value: fields[0].value };  
				// }  
			}  
			console.log(objects);
			var xmlhttp = new XMLHttpRequest();   // new HttpRequest instance
xmlhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
       document.getElementById("result").innerHTML =
       this.responseText;
    }
 };
xmlhttp.open("POST", "http://localhost:3000/checkqueue.html");
xmlhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8", false);
xmlhttp.send(JSON.stringify(objects));

}

</script>
</body>
</html>